package src.game{	import caurina.transitions.Tweener;	import net.fpp.common.starling.StaticAssetManager;	import rv2.sound.SoundHandler;	import starling.display.Image;	import starling.display.Sprite;	import starling.events.Event;	public class Coin extends Sprite	{		private var _graphic:Image;		private var _isCollected:Boolean = false;		public function Coin():void		{			addEventListener( Event.ADDED_TO_STAGE, loaded );		}		public function collect():void		{			SoundHandler.play( 'SND_FLIP' );			_isCollected = true;			Tweener.removeTweens( this );			Tweener.addTween( this, {				time: .5,				x: x - 100,				y: y - 50,				rotation: Math.PI * 6,				alpha: 0,				transition: 'linear',				onComplete: hide			} );		}		private function hide():void		{			visible = false;		}		public function reset():void		{			_isCollected = false;			visible = true;			alpha = 1;			startAnimation();		}		private function startAnimation():void		{			Tweener.removeTweens( this );			Tweener.addTween( this, {time: .2, scaleX: .9, scaleY: .9, transition: 'linear'} );			Tweener.addTween( this, {time: .4, delay: .2, scaleX: 1.1, scaleY: 1.1, transition: 'linear'} );			Tweener.addTween( this, {time: .2, delay: .6, scaleX: 1, scaleY: 1, transition: 'linear'} );			Tweener.addTween( this, {time: 1 + Math.random() * 3, onComplete: startAnimation, transition: 'linear'} );		}		private function loaded( event:Event ):void		{			removeEventListener( Event.ADDED_TO_STAGE, loaded );			addChild( _graphic = new Image( StaticAssetManager.instance.getTexture( "coin" ) ) );			_graphic.pivotX = _graphic.width / 2;			_graphic.pivotY = _graphic.height / 2;		}		public function get isCollected():Boolean		{			return _isCollected;		}		override public function dispose():void		{			Tweener.removeTweens( this );			_graphic.removeFromParent( true );			_graphic = null;			super.dispose();		}	}}